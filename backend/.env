# Sweedle Backend Configuration
# Optimized for RTX 4090 (24GB VRAM) + Ryzen 9 7950X + 96GB RAM

# ============================================
# GPU Performance Settings (RTX 40 Series)
# ============================================

# Enable TF32 tensor operations (8x faster matrix math on RTX 30/40 series)
ENABLE_TF32=true

# Enable cuDNN autotuning (finds optimal algorithms for your GPU)
ENABLE_CUDNN_BENCHMARK=true

# Inference precision: "fp32", "fp16", or "bf16"
# bf16 (BFloat16) is optimal for RTX 40 series - better precision than fp16
INFERENCE_DTYPE=bf16

# Enable Flash Attention for transformer models
ENABLE_FLASH_ATTENTION=true

# Use up to 95% of VRAM (24GB * 0.95 = ~22.8GB available)
CUDA_MEMORY_FRACTION=0.95

# Enable memory-efficient attention
ENABLE_MEMORY_EFFICIENT_ATTENTION=true

# ============================================
# Model Loading Settings
# ============================================

# Load texture pipeline (adds ~18GB to VRAM, enables textures)
ENABLE_TEXTURE_PIPELINE=true

# Lazy loading - if true, models load on first job instead of startup
# Set to true for faster startup, false for faster first generation
LAZY_MODEL_LOADING=false

# Warmup model on startup (eliminates cold-start penalty)
ENABLE_MODEL_WARMUP=true

# ============================================
# Performance Tuning
# ============================================

# Parallel preprocessing threads
PREPROCESSING_WORKERS=4

# Enable preprocessing overlap (preprocess next job during GPU work)
ENABLE_PREPROCESSING_OVERLAP=true

# LOW_VRAM_MODE - leave false since you have 24GB VRAM
LOW_VRAM_MODE=false

# ============================================
# Default Generation Parameters
# ============================================

# Inference steps (5-100, more = higher quality)
DEFAULT_INFERENCE_STEPS=30

# Guidance scale (1.0-15.0, how closely to follow input)
DEFAULT_GUIDANCE_SCALE=5.5

# Octree resolution (128, 256, 384, 512 - mesh detail)
DEFAULT_OCTREE_RESOLUTION=256

# ============================================
# Application Settings
# ============================================

# Debug mode (set to true for verbose logging)
DEBUG=false

# Server settings
HOST=127.0.0.1
PORT=8000

# Job queue
MAX_QUEUE_SIZE=100
JOB_TIMEOUT_SECONDS=600
